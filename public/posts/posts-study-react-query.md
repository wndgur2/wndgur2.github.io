
<img src="https://github.com/user-attachments/assets/f20fe75b-d444-4054-97ba-f6380e84f03d" alt='react-query' />

# React Query (TanStack Query v5)란 무엇인가?

**React Query**, 현재는 **TanStack Query**로 알려져 있으며, TypeScript와 JavaScript 기반의 여러 프레임워크(React, Solid, Vue, Svelte, Angular)에서 사용할 수 있는 **강력한 비동기 상태 관리 라이브러리**입니다. 주로 서버 데이터를 효율적으로 관리하고, 클라이언트 애플리케이션의 상태를 간소화하는 데 사용됩니다.  

---

## **React Query의 핵심 기능과 특징**

### 1. **선언적이고 자동화된 데이터 관리**
- 데이터 페칭, 캐싱, 백그라운드 업데이트, 그리고 오래된 데이터 관리(**stale data**)를 자동으로 처리.
- 개발자가 "데이터를 어디서 가져올지"와 "어느 정도 신선해야 하는지"만 정의하면 나머지 과정을 자동화.
- 코드의 복잡성을 줄이고, 직관적인 데이터 흐름을 제공.

### 2. **간단하고 익숙한 사용법**
- **Promises**나 **async/await**를 이해하고 있다면, React Query 사용은 매우 직관적.
- **전역 상태 관리**(Global State), **리듀서**(Reducer), **데이터 정규화 시스템**(Normalization System) 같은 복잡한 설정 불필요.
- 데이터를 반환하거나 에러를 던지는 간단한 함수만 작성하면 나머지는 자동으로 처리.

### 3. **확장 가능성**
- 쿼리의 각 옵저버(Observer) 인스턴스에 대해 세부적으로 설정 가능.
- **무한 스크롤**, **페이징**, **종속적 쿼리**(Dependent Query), **병렬 쿼리**, **변이(Mutation) API** 등 다양한 기능 제공.
- 개발자 도구(Devtools)를 통해 쿼리 상태를 쉽게 확인 및 디버깅 가능.

### 4. **제로 의존성, 풍부한 기능**
- 의존성이 없으면서도 풍부한 기능을 제공.
- 소규모 프로젝트에서 대규모 엔터프라이즈 애플리케이션(예: Walmart와 같은 대형 플랫폼)까지 사용 가능.

### 5. **백엔드 독립적**
- 특정 백엔드 기술에 의존하지 않으며, 다양한 데이터 소스와 함께 사용 가능.

---

## **React Query의 주요 기능**

| **기능**                        | **설명**                                                                 |
|--------------------------------|-------------------------------------------------------------------------|
| **자동 캐싱**                   | 데이터를 자동으로 캐싱하여 동일한 요청의 중복 방지.                      |
| **자동 리페치(Refetching)**     | 데이터가 오래되거나 상태가 변경되었을 때 자동으로 다시 가져오기.          |
| **윈도우 포커스 리페치**         | 사용자가 브라우저 창으로 돌아오면 자동으로 데이터 업데이트.               |
| **병렬 및 종속적 쿼리**          | 여러 데이터를 병렬로 가져오거나, 특정 데이터에 의존하는 쿼리 지원.        |
| **무한 스크롤 및 페이징**         | 페이징 처리 및 무한 스크롤과 같은 대규모 데이터 처리.                     |
| **오프라인 지원**               | 네트워크 연결이 없는 상태에서도 데이터 작업 가능.                         |
| **SSR(Server-Side Rendering)** | 서버사이드 렌더링 지원으로 초기 로딩 성능 최적화.                        |
| **변이 API(Mutation API)**       | 데이터 업데이트를 간단하고 효율적으로 처리.                             |
| **요청 취소(Request Cancellation)** | 비효율적인 네트워크 요청을 취소 가능.                                    |

---

## **React Query와 Redux 비교**

| **항목**               | **React Query**                             | **Redux**                            |
|------------------------|---------------------------------------------|--------------------------------------|
| **주요 목적**           | 서버 상태 관리                              | 클라이언트 상태 관리                 |
| **설정**               | 최소 설정 필요                              | 초기 설정과 구조 설계가 필요          |
| **데이터 페칭**         | 내장된 기능 제공 (자동화)                   | 별도의 Thunk/Saga 등의 설정 필요     |
| **복잡성**             | 간단하고 직관적                             | 상대적으로 복잡                      |
| **오프라인 지원**       | 기본 제공                                   | 직접 구현 필요                       |
| **사용 사례**           | 서버 데이터 중심 애플리케이션                | 클라이언트 상태 관리가 주된 요구인 앱 |

---

## **React Query가 적합한 경우**
- 데이터 페칭과 비동기 상태 관리를 효율적으로 처리해야 할 때.
- 복잡한 서버 상태와 캐싱 로직이 필요한 애플리케이션.
- API 호출 빈도가 많고, 실시간 데이터 동기화가 필요한 경우.

## **Redux가 적합한 경우**
- 애플리케이션에서 전역 클라이언트 상태 관리가 필요한 경우.
- 서버 상태보다는 사용자 인터페이스(UI) 중심의 데이터 관리가 필요한 경우.

---

## **용어 설명**
- **선언적(Declarative)**: "어떻게"가 아닌 "무엇을" 해야 하는지 명시하는 프로그래밍 방식.
- **자동 캐싱(Auto Caching)**: 데이터를 임시로 저장하여 다시 요청하는 시간을 줄이는 기술.
- **비동기 상태 관리(Asynchronous State Management)**: 네트워크 요청처럼 시간이 걸리는 작업의 상태를 추적하고 관리하는 것.
- **변이(Mutation)**: 기존 데이터를 수정하거나 새 데이터를 추가하는 작업.
- **종속적 쿼리(Dependent Query)**: 다른 데이터의 결과에 따라 실행되는 쿼리.

---

## **참고 자료**
- [tanstack Query 공식 문서](https://tanstack.com/query/latest)